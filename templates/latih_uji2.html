<section style="min-height: 600px !important;">
    <div class="container">
      	<div class="section text-center" style="margin: auto 0 !important;">

			<div class="row" style="text-align: left;">
				<div class="col-md-6 heading">
					<h3>Pelatihan dan Pengujian</h3>
					<div>
						{% with messages = get_flashed_messages(category_filter=["latih_uji1"]) %}
							{% if messages %}
							<div class="alert alert-success">
								{%- for message in messages %}
									{{ message }}
								{% endfor -%}
							</div>
							{% endif %}
						{% endwith %}
					</div>

					<form id="form-latih-uji" action="{{ url_for('.latih_uji') }}" method="POST" enctype="multipart/form-data">
						<div class="form-group">
					    	<label for="Unggah Data">Unggah Data </label>
					    	<p class="text-danger" style="font-size: 12px;">* Data dalam format zip</p>
					    	<input type="file" name="zip_file" multiple="" class="form-control-file" id="zip_file">
						</div>
						<input type="submit" name="latih_uji" class="btn btn-primary" value="Latih dan Uji" onclick="UI.latih_uji(); return false;">
					</form> 
				</div>

				<!-- <div class="col-md-3 heading">
					<h3>Lakukan Pengujian</h3> <br>
					<a href="{{ url_for('.lakukan_uji') }}" class="btn btn-lg btn-primary"><i class="info"></i> UJI</a>
				</div> -->

				<div class="col-md-6 heading">
					<h3>Pengujian dan Pelatihan</h3>
					<div>
					{% with messages2 = get_flashed_messages(category_filter=["latih_uji2"]) %}
						{% if messages2 %}
							<div class="alert alert-success">
								{%- for msg in messages2 %}
									{{ msg }}
								{% endfor -%}
							</div>
							{% endif %}
						{% endwith %}
					</div>
					<form action="{{ url_for('.uji_data') }}" method="POST">
						<div class="form-group">
					    	<p class="text-danger" style="font-size: 12px;">* Jumlah data latih dan ekspresi yang berbeda</p>
							<input type="submit" name="uji_data" class="btn btn-primary" value="Latih dan Uji">
						</div>
					</form> 
				</div>
			</div>


			<style type="text/css">
				table{width: 100%}
				.foto{width:100px; height:100px;}
			</style>

			{% if files %}
			<div style="margin-top: 5%;">
				<hr><hr>
			</div>
				<div class="row">
					<div class="col-md-12 heading">
						<h3><strong>Hasil Pengujian</strong></h3>
					</div>
				</div>
				
				<div class="row" style="margin-top: 2%;">
					<div class="col-md-12">
						<table class="table table-bordered" style="text-align: center;">
							<thead class="thead-light">
								<tr>
									<th rowspan="2" style="width: 50px !important;">No</th>
									<th colspan="3">Jumlah</th>
									<th colspan="2">Rata-Rata</th>
								</tr>
								<tr>
									<th style="width: 100px;">Data <br>Latih</th>
									<th style="width: 100px;">Data <br>Uji</th>
									<th style="width: 100px;">Ekspresi</th>
									<th>Akurasi Sendiri</th>
									<th>Akurasi OpenCV</th> 
								</tr>
							</thead>
							<tbody>
								{% set jumlah_uji = files['S']|length %}
								{% for i in range(jumlah_uji) %}
									<tr>
										<td>{{ i + 1 }}</td>
										<td>
											{% set files = files['S'][i]|length %}
											{{ files }}
										</td>
										<td>
											{{ akurasi['jumlah_data_uji'] }}
										</td> 
										<td>
											{{ akurasi['jumlah_ekspresi'] }}
										</td>  
										<td>
											{% set jumlah_akurasi_s = akurasi['rata_s'][i]|length %}
											{% for x in range(jumlah_akurasi_s): %}
											{{ akurasi['rata_s'][i][x]|string + '%' }} <br>
											{% endfor %}
										</td>
										<td>
											{% set jumlah_akurasi_o = akurasi['rata_o'][i]|length %}
											{% for y in range(jumlah_akurasi_o): %}
											{{ akurasi['rata_o'][i][y]|string + '%' }} <br>
											{% endfor %}
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
</section>

<script type="text/javascript">
	var UI;
	window.onload = function() {
		$(document).ready(function() {

			UI = {
				latih_uji: function() {
					$('#form-latih-uji').submit();
					return false;
				}
			};

		});
	};
	
</script>